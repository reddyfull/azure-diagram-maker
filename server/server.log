2025-04-03 12:45:07,179 - mongodb_client - INFO - Loading environment variables from /Users/sritadip/Documents/draw/server/.env
2025-04-03 12:45:07,182 - mongodb_client - INFO - Connecting to MongoDB: mongodb+srv://[username]:[password]@sridraw.rpkmj.mongodb.net/?retryWrites=true&w=majority&appName=sridraw
2025-04-03 12:45:07,182 - mongodb_client - INFO - Creating MongoDB client...
2025-04-03 12:45:07,341 - mongodb_client - INFO - Sending ping command...
2025-04-03 12:45:07,629 - mongodb_client - ERROR - Failed to connect to MongoDB Atlas: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}
2025-04-03 12:45:07,634 - mongodb_client - ERROR - Stack trace: Traceback (most recent call last):
  File "/Users/sritadip/Documents/draw/server/mongodb_client.py", line 56, in initialize_mongodb
    mongo_client.admin.command('ping')
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/_csot.py", line 107, in csot_wrapper
    return func(self, *args, **kwargs)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/database.py", line 890, in command
    with self.__client._conn_for_reads(read_preference, session) as (
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/mongo_client.py", line 1330, in _conn_from_server
    with self._checkout(server, session) as conn:
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/mongo_client.py", line 1252, in _checkout
    with server.checkout(handler=err_handler) as conn:
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1637, in checkout
    conn = self._get_conn(handler=handler)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1756, in _get_conn
    conn = self.connect(handler=handler)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1607, in connect
    conn.authenticate()
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1078, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 625, in authenticate
    auth_func(credentials, conn)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 530, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 298, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/helpers.py", line 322, in inner
    return func(*args, **kwargs)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 968, in command
    return command(
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/network.py", line 192, in command
    helpers._check_command_response(
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/helpers.py", line 230, in _check_command_response
    raise OperationFailure(errmsg, code, response, max_wire_version)
pymongo.errors.OperationFailure: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}

2025-04-03 12:45:07,635 - mongodb_client - WARNING - MongoDB initialization failed, will use local/GCS storage only
2025-04-03 12:45:07,639 - mongodb_client - INFO - Loading environment variables from /Users/sritadip/Documents/draw/server/.env
2025-04-03 12:45:07,639 - mongodb_client - INFO - Connecting to MongoDB: mongodb+srv://[username]:[password]@sridraw.rpkmj.mongodb.net/?retryWrites=true&w=majority&appName=sridraw
2025-04-03 12:45:07,639 - mongodb_client - INFO - Creating MongoDB client...
2025-04-03 12:45:07,741 - mongodb_client - INFO - Sending ping command...
2025-04-03 12:45:08,043 - mongodb_client - ERROR - Failed to connect to MongoDB Atlas: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}
2025-04-03 12:45:08,044 - mongodb_client - ERROR - Stack trace: Traceback (most recent call last):
  File "/Users/sritadip/Documents/draw/server/mongodb_client.py", line 56, in initialize_mongodb
    mongo_client.admin.command('ping')
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/_csot.py", line 107, in csot_wrapper
    return func(self, *args, **kwargs)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/database.py", line 890, in command
    with self.__client._conn_for_reads(read_preference, session) as (
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/mongo_client.py", line 1330, in _conn_from_server
    with self._checkout(server, session) as conn:
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/mongo_client.py", line 1252, in _checkout
    with server.checkout(handler=err_handler) as conn:
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1637, in checkout
    conn = self._get_conn(handler=handler)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1756, in _get_conn
    conn = self.connect(handler=handler)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1607, in connect
    conn.authenticate()
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1078, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 625, in authenticate
    auth_func(credentials, conn)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 530, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 298, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/helpers.py", line 322, in inner
    return func(*args, **kwargs)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 968, in command
    return command(
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/network.py", line 192, in command
    helpers._check_command_response(
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/helpers.py", line 230, in _check_command_response
    raise OperationFailure(errmsg, code, response, max_wire_version)
pymongo.errors.OperationFailure: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}

2025-04-03 12:45:08,044 - __main__ - INFO - Trying direct MongoDB connection...
2025-04-03 12:45:08,699 - __main__ - ERROR - MongoDB initialization error: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}
2025-04-03 12:45:08,699 - __main__ - WARNING - MongoDB integration disabled - using local storage only
2025-04-03 12:45:08,702 - __main__ - INFO - Using GCS credentials from /Users/sritadip/Documents/draw/server/../gcs-key.json
2025-04-03 12:45:08,719 - __main__ - INFO - Connected to GCS with project: gen-lang-client-0452237601
2025-04-03 12:45:09,229 - __main__ - INFO - Successfully wrote test file to GCS: https://storage.googleapis.com/aiicons/test-permissions.txt
2025-04-03 12:45:09,415 - __main__ - INFO - Successfully deleted test file from GCS
2025-04-03 12:45:09,415 - __main__ - INFO - Google Cloud Storage initialized with bucket: aiicons
2025-04-03 12:45:09,415 - __main__ - INFO - Local storage directory initialized at: /Users/sritadip/Documents/draw/server/../public/cloudicons
2025-04-03 12:45:09,426 - __main__ - INFO - Model Context Protocol API Server running on port 3002
2025-04-03 12:45:09,426 - __main__ - INFO - Accepting requests from: http://localhost:8080
2025-04-03 12:45:09,426 - __main__ - INFO - -------------------------------------------------------------------------
2025-04-03 12:45:09,426 - __main__ - INFO - USING LOCAL STORAGE - MongoDB is not available
2025-04-03 12:45:09,426 - __main__ - INFO - Diagrams will be stored in local JSON file
2025-04-03 12:45:09,426 - __main__ - INFO - -------------------------------------------------------------------------
 * Serving Flask app 'upload' (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: on
2025-04-03 12:45:09,445 - werkzeug - WARNING -  * Running on all addresses.
   WARNING: This is a development server. Do not use it in a production deployment.
2025-04-03 12:45:09,450 - werkzeug - INFO -  * Running on http://192.168.1.232:3002/ (Press CTRL+C to quit)
2025-04-03 12:45:09,453 - werkzeug - INFO -  * Restarting with stat
2025-04-03 12:45:10,536 - mongodb_client - INFO - Loading environment variables from /Users/sritadip/Documents/draw/server/.env
2025-04-03 12:45:10,536 - mongodb_client - INFO - Connecting to MongoDB: mongodb+srv://[username]:[password]@sridraw.rpkmj.mongodb.net/?retryWrites=true&w=majority&appName=sridraw
2025-04-03 12:45:10,536 - mongodb_client - INFO - Creating MongoDB client...
2025-04-03 12:45:10,649 - mongodb_client - INFO - Sending ping command...
2025-04-03 12:45:10,987 - mongodb_client - ERROR - Failed to connect to MongoDB Atlas: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}
2025-04-03 12:45:10,991 - mongodb_client - ERROR - Stack trace: Traceback (most recent call last):
  File "/Users/sritadip/Documents/draw/server/mongodb_client.py", line 56, in initialize_mongodb
    mongo_client.admin.command('ping')
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/_csot.py", line 107, in csot_wrapper
    return func(self, *args, **kwargs)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/database.py", line 890, in command
    with self.__client._conn_for_reads(read_preference, session) as (
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/mongo_client.py", line 1330, in _conn_from_server
    with self._checkout(server, session) as conn:
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/mongo_client.py", line 1252, in _checkout
    with server.checkout(handler=err_handler) as conn:
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1637, in checkout
    conn = self._get_conn(handler=handler)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1756, in _get_conn
    conn = self.connect(handler=handler)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1607, in connect
    conn.authenticate()
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1078, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 625, in authenticate
    auth_func(credentials, conn)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 530, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 298, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/helpers.py", line 322, in inner
    return func(*args, **kwargs)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 968, in command
    return command(
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/network.py", line 192, in command
    helpers._check_command_response(
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/helpers.py", line 230, in _check_command_response
    raise OperationFailure(errmsg, code, response, max_wire_version)
pymongo.errors.OperationFailure: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}

2025-04-03 12:45:10,991 - mongodb_client - WARNING - MongoDB initialization failed, will use local/GCS storage only
2025-04-03 12:45:10,994 - mongodb_client - INFO - Loading environment variables from /Users/sritadip/Documents/draw/server/.env
2025-04-03 12:45:10,994 - mongodb_client - INFO - Connecting to MongoDB: mongodb+srv://[username]:[password]@sridraw.rpkmj.mongodb.net/?retryWrites=true&w=majority&appName=sridraw
2025-04-03 12:45:10,995 - mongodb_client - INFO - Creating MongoDB client...
2025-04-03 12:45:11,165 - mongodb_client - INFO - Sending ping command...
2025-04-03 12:45:11,474 - mongodb_client - ERROR - Failed to connect to MongoDB Atlas: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}
2025-04-03 12:45:11,475 - mongodb_client - ERROR - Stack trace: Traceback (most recent call last):
  File "/Users/sritadip/Documents/draw/server/mongodb_client.py", line 56, in initialize_mongodb
    mongo_client.admin.command('ping')
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/_csot.py", line 107, in csot_wrapper
    return func(self, *args, **kwargs)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/database.py", line 890, in command
    with self.__client._conn_for_reads(read_preference, session) as (
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/mongo_client.py", line 1330, in _conn_from_server
    with self._checkout(server, session) as conn:
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/mongo_client.py", line 1252, in _checkout
    with server.checkout(handler=err_handler) as conn:
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/contextlib.py", line 135, in __enter__
    return next(self.gen)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1637, in checkout
    conn = self._get_conn(handler=handler)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1756, in _get_conn
    conn = self.connect(handler=handler)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1607, in connect
    conn.authenticate()
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 1078, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 625, in authenticate
    auth_func(credentials, conn)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 530, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/auth.py", line 298, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/helpers.py", line 322, in inner
    return func(*args, **kwargs)
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/pool.py", line 968, in command
    return command(
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/network.py", line 192, in command
    helpers._check_command_response(
  File "/Users/sritadip/.pyenv/versions/3.10.12/lib/python3.10/site-packages/pymongo/helpers.py", line 230, in _check_command_response
    raise OperationFailure(errmsg, code, response, max_wire_version)
pymongo.errors.OperationFailure: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}

2025-04-03 12:45:11,475 - __main__ - INFO - Trying direct MongoDB connection...
2025-04-03 12:45:11,864 - __main__ - ERROR - MongoDB initialization error: bad auth : authentication failed, full error: {'ok': 0, 'errmsg': 'bad auth : authentication failed', 'code': 8000, 'codeName': 'AtlasError'}
2025-04-03 12:45:11,864 - __main__ - WARNING - MongoDB integration disabled - using local storage only
2025-04-03 12:45:11,870 - __main__ - INFO - Using GCS credentials from /Users/sritadip/Documents/draw/server/../gcs-key.json
2025-04-03 12:45:11,887 - __main__ - INFO - Connected to GCS with project: gen-lang-client-0452237601
2025-04-03 12:45:12,364 - __main__ - INFO - Successfully wrote test file to GCS: https://storage.googleapis.com/aiicons/test-permissions.txt
2025-04-03 12:45:12,546 - __main__ - INFO - Successfully deleted test file from GCS
2025-04-03 12:45:12,546 - __main__ - INFO - Google Cloud Storage initialized with bucket: aiicons
2025-04-03 12:45:12,546 - __main__ - INFO - Local storage directory initialized at: /Users/sritadip/Documents/draw/server/../public/cloudicons
2025-04-03 12:45:12,554 - __main__ - INFO - Model Context Protocol API Server running on port 3002
2025-04-03 12:45:12,554 - __main__ - INFO - Accepting requests from: http://localhost:8080
2025-04-03 12:45:12,554 - __main__ - INFO - -------------------------------------------------------------------------
2025-04-03 12:45:12,554 - __main__ - INFO - USING LOCAL STORAGE - MongoDB is not available
2025-04-03 12:45:12,554 - __main__ - INFO - Diagrams will be stored in local JSON file
2025-04-03 12:45:12,554 - __main__ - INFO - -------------------------------------------------------------------------
2025-04-03 12:45:12,566 - werkzeug - WARNING -  * Debugger is active!
2025-04-03 12:45:12,587 - werkzeug - INFO -  * Debugger PIN: 111-586-509
